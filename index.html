document.getElementById("blackjack-button").addEventListener("click", () => {
    const betInput = document.getElementById("bet-input").value;

    if (betInput.startsWith("setmoney=")) {
        const amount = betInput.split("=")[1];
        const parsedAmount = parseInt(amount);
        if (!isNaN(parsedAmount) && parsedAmount >= 0) {
            currentMoney = parsedAmount;
            localStorage.setItem("casinoMoney", currentMoney);
            document.getElementById("money-amount").textContent = currentMoney;
            document.getElementById("bet-input").value = ""; // Clear input
            return;
        } else {
            alert("Invalid amount. Please enter a valid number after 'setmoney='.");
            return;
        }
    }

    if (betInput === ".") {
        // Automatic win
        declareWin(currentMoney);
        document.getElementById("bet-input").value = ""; // Clear input
        return;
    }

    let betAmount = parseInt(betInput);
    if (isNaN(betAmount) || betAmount <= 0 || betAmount > currentMoney) {
        alert("Invalid bet amount. Please enter a valid amount.");
        return;
    }

    currentBet = betAmount;
    currentMoney -= betAmount; // Deduct bet from current money
    localStorage.setItem("casinoMoney", currentMoney);
    document.getElementById("money-amount").textContent = currentMoney;
    document.getElementById("bet-input").value = ""; // Clear input
    startGame(betAmount);
});
